# Электронные ценники (ESP32 + LoRa Mesh)

Проект электронных ценников с централизованным управлением через веб‑интерфейс и беспроводной mesh‑сетью на LoRa.

Цель проекта — предоставить рабочую архитектуру, в которой пользователь может изменить информацию о товаре в веб‑интерфейсе, после чего обновлённые данные автоматически доходят до нужного электронного ценника и отображаются на e‑Paper экране.

---

## Общая архитектура

Система состоит из четырёх логических частей:

1. **Электронные ценники**
   ESP32 + e‑Paper дисплей, прошивка на MicroPython.

2. **LoRa mesh‑сеть**
   Ценники и шлюз образуют mesh‑сеть на базе LoRa, что позволяет доставлять пакеты даже при отсутствии прямой связи.

3. **Шлюз**
   Отвечает за связь между сервером и LoRa mesh‑сетью. Принимает команды от сервера и распространяет их по сети.

4. **Сервер + веб‑интерфейс**
   React‑фронтенд для пользователя и backend, работающий с базой данных и шлюзом.

---

## Поток данных

1. Пользователь изменяет данные о товаре в веб‑интерфейсе (React).
2. Backend сохраняет изменения в базе данных SQLite.
3. Backend формирует пакет обновления и отправляет его шлюзу.
4. Шлюз распространяет пакет по LoRa mesh‑сети.
5. Ценник получает пакет, обновляет данные и перерисовывает e‑Paper экран.

---

## Компоненты проекта

### Электронный ценник

* ESP32
* e‑Paper дисплей
* MicroPython
* Приём данных по LoRa
* Отображение информации о товаре
* Оптимизация энергопотребления (deep sleep, редкие обновления)

Код для ценников находится в соответствующей директории репозитория и полностью написан на MicroPython.

---

### LoRa mesh‑сеть

* Обмен сообщениями между узлами
* Маршрутизация пакетов через промежуточные ценники
* Доставка данных от шлюза до конкретного устройства

Mesh‑подход позволяет масштабировать систему и повышает надёжность доставки.

---

### Шлюз

* Связь с сервером
* Отправка и приём пакетов LoRa
* Распространение сообщений по mesh‑сети

Шлюз является единственной точкой связи между IP‑сетью и LoRa.

---

### Backend

* Получение данных от фронтенда
* Работа с базой данных SQLite
* Формирование пакетов обновления
* Общение со шлюзом

Backend отвечает за консистентность данных и синхронизацию состояния ценников.

---

### Frontend

* React
* Интерфейс управления товарами
* Изменение цены, названия и других параметров
* Инициирование обновлений ценников

---

## База данных

* SQLite
* Хранение информации о товарах
* Связь товаров с конкретными ценниками

---

## Назначение проекта

Проект ориентирован на:

* получение практического опыта работы с Iot‑устройствами
* построение распределённых сетей (mesh)
* интеграцию hardware и web‑части
* разработку end‑to‑end системы от UI до микроконтроллера

Проект не является коммерческим продуктом, а демонстрирует реальную архитектуру электронных ценников, применимую в рознице.

---

## Статус

Проект находится в активной разработке. Архитектура и протоколы могут меняться по мере экспериментов и оптимизаций.
