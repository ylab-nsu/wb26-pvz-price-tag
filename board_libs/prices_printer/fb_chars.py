import framebuf
from .base_config import CH_SZ_X, CH_SZ_Y


RU_FONT = {
    'А': [0x04, 0x0A, 0x11, 0x11, 0x1F, 0x11, 0x11],  # 5x7
    'Б': [0x1F, 0x10, 0x1E, 0x11, 0x11, 0x1E, 0x00],  # 5x7
    'В': [0x1E, 0x11, 0x1E, 0x11, 0x11, 0x1E, 0x00],  # 5x7
    'Г': [0x1F, 0x10, 0x10, 0x10, 0x10, 0x10, 0x00],  # 5x7
    'Д': [0x0C, 0x0A, 0x0A, 0x0A, 0x1E, 0x12, 0x12],  # 5x7
    'Е': [0x1F, 0x10, 0x1F, 0x10, 0x10, 0x1F, 0x00],  # 5x7
    'Ё': [0x0A, 0x00, 0x1F, 0x10, 0x1F, 0x10, 0x1F],  # 5x7 с точками
    'Ж': [0x15, 0x15, 0x0E, 0x04, 0x0E, 0x15, 0x15],  # 5x7
    'З': [0x0E, 0x11, 0x01, 0x06, 0x01, 0x11, 0x0E],  # 5x7
    'И': [0x11, 0x13, 0x15, 0x19, 0x11, 0x11, 0x11],  # 5x7
    'Й': [0x0A, 0x04, 0x13, 0x15, 0x19, 0x11, 0x11],  # 5x7
    'К': [0x11, 0x12, 0x14, 0x18, 0x14, 0x12, 0x11],  # 5x7
    'Л': [0x07, 0x09, 0x11, 0x11, 0x11, 0x11, 0x11],  # 5x7
    'М': [0x11, 0x1B, 0x15, 0x15, 0x11, 0x11, 0x11],  # 5x7
    'Н': [0x11, 0x11, 0x1F, 0x11, 0x11, 0x11, 0x11],  # 5x7
    'О': [0x0E, 0x11, 0x11, 0x11, 0x11, 0x11, 0x0E],  # 5x7
    'П': [0x1F, 0x11, 0x11, 0x11, 0x11, 0x11, 0x11],  # 5x7
    'Р': [0x1E, 0x11, 0x11, 0x1E, 0x10, 0x10, 0x10],  # 5x7
    'С': [0x0E, 0x11, 0x10, 0x10, 0x10, 0x11, 0x0E],  # 5x7
    'Т': [0x1F, 0x04, 0x04, 0x04, 0x04, 0x04, 0x04],  # 5x7
    'У': [0x11, 0x11, 0x11, 0x0F, 0x01, 0x11, 0x0E],  # 5x7
    'Ф': [0x04, 0x0E, 0x15, 0x15, 0x15, 0x0E, 0x04],  # 5x7
    'Х': [0x11, 0x11, 0x0A, 0x04, 0x0A, 0x11, 0x11],  # 5x7
    'Ц': [0x11, 0x11, 0x11, 0x11, 0x11, 0x1F, 0x01],  # 5x7
    'Ч': [0x11, 0x11, 0x11, 0x0F, 0x01, 0x01, 0x01],  # 5x7
    'Ш': [0x15, 0x15, 0x15, 0x15, 0x15, 0x15, 0x1F],  # 5x7
    'Щ': [0x15, 0x15, 0x15, 0x15, 0x15, 0x1F, 0x01],  # 5x7
    'Ъ': [0x18, 0x08, 0x0F, 0x09, 0x09, 0x0F, 0x00],  # 5x7
    'Ы': [0x11, 0x11, 0x1D, 0x13, 0x13, 0x1D, 0x00],  # 5x7
    'Ь': [0x10, 0x10, 0x1E, 0x11, 0x11, 0x1E, 0x00],  # 5x7
    'Э': [0x0E, 0x11, 0x01, 0x07, 0x01, 0x11, 0x0E],  # 5x7
    'Ю': [0x17, 0x19, 0x15, 0x13, 0x11, 0x11, 0x11],  # 5x7
    'Я': [0x0F, 0x11, 0x11, 0x0F, 0x05, 0x09, 0x11],  # 5x7
    
    # Строчные буквы
    'а': [0x00, 0x00, 0x0E, 0x01, 0x0F, 0x11, 0x0F],  # 5x7
    'б': [0x00, 0x0E, 0x10, 0x1E, 0x11, 0x11, 0x0E],  # 5x7
    'в': [0x00, 0x00, 0x1E, 0x11, 0x1E, 0x11, 0x1E],  # 5x7
    'г': [0x00, 0x00, 0x1F, 0x10, 0x10, 0x10, 0x10],  # 5x7
    'д': [0x00, 0x00, 0x07, 0x05, 0x05, 0x0F, 0x09],  # 5x7
    'е': [0x00, 0x00, 0x0E, 0x11, 0x1F, 0x10, 0x0E],  # 5x7
    'ё': [0x0A, 0x00, 0x0E, 0x11, 0x1F, 0x10, 0x0E],  # 5x7
    'ж': [0x00, 0x00, 0x15, 0x15, 0x0E, 0x15, 0x15],  # 5x7
    'з': [0x00, 0x00, 0x0E, 0x01, 0x06, 0x01, 0x0E],  # 5x7
    'и': [0x00, 0x00, 0x11, 0x13, 0x15, 0x19, 0x11],  # 5x7
    'й': [0x0A, 0x04, 0x11, 0x13, 0x15, 0x19, 0x11],  # 5x7
    'к': [0x00, 0x00, 0x12, 0x14, 0x18, 0x14, 0x12],  # 5x7
    'л': [0x00, 0x00, 0x07, 0x09, 0x11, 0x11, 0x11],  # 5x7
    'м': [0x00, 0x00, 0x11, 0x1B, 0x15, 0x11, 0x11],  # 5x7
    'н': [0x00, 0x00, 0x11, 0x11, 0x1F, 0x11, 0x11],  # 5x7
    'о': [0x00, 0x00, 0x0E, 0x11, 0x11, 0x11, 0x0E],  # 5x7
    'п': [0x00, 0x00, 0x1F, 0x11, 0x11, 0x11, 0x11],  # 5x7
    'р': [0x00, 0x00, 0x1E, 0x11, 0x1E, 0x10, 0x10],  # 5x7
    'с': [0x00, 0x00, 0x0E, 0x10, 0x10, 0x10, 0x0E],  # 5x7
    'т': [0x00, 0x00, 0x1F, 0x04, 0x04, 0x04, 0x04],  # 5x7
    'у': [0x00, 0x00, 0x11, 0x11, 0x0F, 0x01, 0x0E],  # 5x7
    'ф': [0x00, 0x04, 0x0E, 0x15, 0x15, 0x0E, 0x04],  # 5x7
    'х': [0x00, 0x00, 0x11, 0x0A, 0x04, 0x0A, 0x11],  # 5x7
    'ц': [0x00, 0x00, 0x11, 0x11, 0x11, 0x1F, 0x01],  # 5x7
    'ч': [0x00, 0x00, 0x11, 0x11, 0x0F, 0x01, 0x01],  # 5x7
    'ш': [0x00, 0x00, 0x15, 0x15, 0x15, 0x15, 0x1F],  # 5x7
    'щ': [0x00, 0x00, 0x15, 0x15, 0x15, 0x1F, 0x01],  # 5x7
    'ъ': [0x00, 0x18, 0x08, 0x0E, 0x09, 0x09, 0x0E],  # 5x7
    'ы': [0x00, 0x00, 0x11, 0x11, 0x1D, 0x13, 0x1D],  # 5x7
    'ь': [0x00, 0x00, 0x10, 0x10, 0x1E, 0x11, 0x1E],  # 5x7
    'э': [0x00, 0x00, 0x0E, 0x01, 0x07, 0x01, 0x0E],  # 5x7
    'ю': [0x00, 0x00, 0x17, 0x19, 0x11, 0x11, 0x11],  # 5x7
    'я': [0x00, 0x00, 0x0F, 0x11, 0x0F, 0x05, 0x09],  # 5x7
}



def write_ch(fb, ch, color=0):
    if ch in RU_FONT:
        data = RU_FONT.get(ch)
        if not data:
            return
        for y in range(len(data)):
            row = data[y]
            for x in range(CH_SZ_X):
                if row & (1 << (7 - x)):
                    fb.pixel(x, y, color)
        return
    fb.text(ch, 0, 0, color)
